const fs = require('fs')
const { join } = require('path')

// Path to the PEM file containing the certificate
const INPUT_PATH = join(__dirname, '../../certs/myna_cert.pem');
const OUTPUT_PATH = join(__dirname, '../../certs/der.txt');

// Read the PEM file
const pem = fs.readFileSync(INPUT_PATH, 'utf8')

// Remove the '-----BEGIN CERTIFICATE-----' and '-----END CERTIFICATE-----' lines
const base64String = pem
    .replace('-----BEGIN CERTIFICATE-----', '')
    .replace('-----END CERTIFICATE-----', '')
    .replace(/\n/g, '')

const der = Buffer.from(base64String, 'base64')
console.log(der);
const input = "3082062e30820516a003020102020406bfc341300d06092a864886f70d01010b0500308182310b3009060355040613024a50310d300b060355040a0c044a504b4931253023060355040b0c1c4a504b4920666f7220757365722061757468656e7469636174696f6e313d303b060355040b0c344a6170616e204167656e637920666f72204c6f63616c20417574686f7269747920496e666f726d6174696f6e2053797374656d73301e170d3233303531393136333730395a170d3237313230373134353935395a302f310b3009060355040613024a503120301e06035504030c173431323539344537354a41434a4d31343130343030334130820122300d06092a864886f70d01010105000382010f003082010a0282010100a817baf8fa4e6e760868d1dbc56ee50099d22a67ad98328713f9fdf2055d9b73fc6cd9a6c0eb9ca24ff7c0e34ad268bf8b7eab96f270017f32739813d007c52c976322bc320049b3e68b9a1953dc915a75a2e85d7efa2005d4f2f3cc3abca234f11ae4edd8fe7d7f60f3ca31aaf4ddc520e1e3c925ee91fd08118316b4bb9b910cec74f878a4e3502c2b0d894064ea5c9b795c440cd3ee7de1daa10b319ef560a96828a1fa4c1c17f32391f334ec6817b953abae86258efbeae2b5b28bce63ac08a48072dcf635693fb4af7e7fc07ad3a2b78172304c18dab9f3d206581c4849b8d8f11d6db5efd42e2c8964719ea6966342ae43e6ff101b994ae845ae47cf1b0203010001a38202fc308202f8300e0603551d0f0101ff04040302078030130603551d25040c300a06082b0601050507030230490603551d200101ff043f303d303b060b2a83088c9b55080501031e302c302a06082b06010505070201161e687474703a2f2f7777772e6a706b692e676f2e6a702f6370732e68746d6c3081b70603551d120481af3081aca481a93081a6310b3009060355040613024a5031273025060355040a0c1ee585ace79a84e5808be4babae8aa8de8a8bce382b5e383bce38393e382b931393037060355040b0c30e585ace79a84e5808be4babae8aa8de8a8bce382b5e383bce38393e382b9e588a9e794a8e88085e8a8bce6988ee794a831333031060355040b0c2ae59cb0e696b9e585ace585b1e59ba3e4bd93e68385e5a0b1e382b7e382b9e38386e383a0e6a99fe6a78b3081bb0603551d1f0481b33081b03081ada081aaa081a7a481a43081a1310b3009060355040613024a50310d300b060355040a0c044a504b4931253023060355040b0c1c4a504b4920666f7220757365722061757468656e7469636174696f6e3120301e060355040b0c1743524c20446973747269627574696f6e20506f696e747331153013060355040b0c0c4b616e61676177612d6b656e3123302106035504030c1a596f6b6f68616d612d7368692d4e616b612d6b752043524c4450303a06082b06010505070101042e302c302a06082b06010505073001861e687474703a2f2f6f637370617574686e6f726d2e6a706b692e676f2e6a703081b20603551d230481aa3081a780148cd5586a891485e559379b7e29d410cfd28b3593a18188a48185308182310b3009060355040613024a50310d300b060355040a0c044a504b4931253023060355040b0c1c4a504b4920666f7220757365722061757468656e7469636174696f6e313d303b060355040b0c344a6170616e204167656e637920666f72204c6f63616c20417574686f7269747920496e666f726d6174696f6e2053797374656d7382040133c349301d0603551d0e04160414ca786123cdc58798c182fdde3eca05e2b18215a5300d06092a864886f70d01010b0500038201010046b35d93f0486d132aff57d64ff92c7952074b1f26bb5dc0ba0377cd3f2d37febc16b226a4659234ef69ca9818cbbeb465dde154948ac478460bda12a3c7a0e37ace1a5d82c082af0f186234c80df4ff326625f44ab8fc4669e7a698d878d26f538615b9b2ccbb846a7a9110a6028c4de9c49889e54e4084d9faa0ba79b5a97e82602b55c6bcc2afbcd77a9fcff7945a51204b76be6b77139a2e96fef85f0b0e376cd5ea4dead88a10623e1bb8eabce29834dde2ae842b0a3039976cbbfba6d78217439a8e840bb4f8a776c5b46e8c103d818a229fc570b200212e0aceed5d0e18ccc100430101005dbc6febe7b78009ab426cbe17d68402a8ab7c8baaec1ef8";
const hello = Buffer.from(input);
console.log(hello);
console.log(typeof(hello))
// The modulus
// console.log(`0x${der.toString('hex')}`);
fs.writeFile(OUTPUT_PATH, der.toString('hex'), (err) => {
 if (err) throw err;
});